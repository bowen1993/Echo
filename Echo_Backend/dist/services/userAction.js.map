{"version":3,"sources":["services/userAction.js"],"names":["User","createNewUser","phoneNum","email","username","session","getSession","userDao","getDao","choose","newUser","create","console","log","updateUserInfo","userId","updatedInfo","update","id","$set","module","exports"],"mappings":";;AAAA;;;;AACA;;;;;;AAEA,IAAMA,OAAO,iBAAMA,IAAnB;;AAEA,eAAeC,aAAf,CAA6BC,QAA7B,EAAuCC,KAAvC,EAA4D;AAAA,QAAdC,QAAc,uEAAL,IAAK;;AACxD;AACA,QAAMC,UAAU,MAAM,iBAAMC,UAAN,EAAtB;AACA,QAAMC,UAAUF,QAAQG,MAAR,CAAeR,IAAf,CAAhB;;AAEA,QAAII,YAAY,IAAhB,EAAsB;AAClB;AACAA,mBAAW,kBAAQK,MAAR,EAAX;AACH;;AAED;AACA,QAAIC,UAAU,IAAIV,IAAJ,CAAS;AACnBI,kBAASA,QADU;AAEnBF,kBAASA,QAFU;AAGnBC,eAAMA;AAHa,KAAT,CAAd;;AAMA;AACA,UAAMI,QAAQI,MAAR,CAAeD,OAAf,CAAN;AACAE,YAAQC,GAAR,CAAYH,OAAZ;AACH;;AAED,eAAeI,cAAf,CAA8BC,MAA9B,EAAsCC,WAAtC,EAAkD;AAC9C;AACA,QAAMX,UAAU,MAAM,iBAAMC,UAAN,EAAtB;AACA,QAAMC,UAAUF,QAAQG,MAAR,CAAeR,IAAf,CAAhB;;AAEA,UAAMO,QAAQU,MAAR,CAAe;AACjBC,YAAGH;AADc,KAAf,EAEJ;AACEI,cAAMH;AADR,KAFI,CAAN;AAKH;;AAEDI,OAAOC,OAAP,GAAiB;AACbpB;AADa,CAAjB","file":"userAction.js","sourcesContent":["import model from '../models'\nimport Moniker from 'moniker'\n\nconst User = model.User\n\nasync function createNewUser(phoneNum, email, username=null){\n    //get db session\n    const session = await model.getSession()\n    const userDao = session.getDao(User);\n\n    if( username == null ){\n        // generate random username\n        username = Moniker.choose();\n    }\n\n    //create new user\n    let newUser = new User({\n        username:username,\n        phoneNum:phoneNum,\n        email:email\n    });\n\n    //save new user\n    await userDao.create(newUser)\n    console.log(newUser)\n}\n\nasync function updateUserInfo(userId, updatedInfo){\n    //get db session\n    const session = await model.getSession()\n    const userDao = session.getDao(User);\n\n    await userDao.update({\n        id:userId\n    },{\n        $set: updatedInfo\n    });\n}\n\nmodule.exports = {\n    createNewUser\n}"]}